# DefenderPro - Guia Visual da Arquitetura ğŸ¨

## ğŸ“ Diagrama de Camadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React)                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Dashboard â”‚  â”‚  Scans   â”‚  â”‚ Threats  â”‚  â”‚ Settings â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚             â”‚
        â”‚ invoke()    â”‚ invoke()    â”‚ invoke()    â”‚ invoke()
        â”‚             â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             COMMANDS (Camada de ApresentaÃ§Ã£o)               â”‚
â”‚                                                              â”‚
â”‚  defender_status â”‚  scan_commands  â”‚ threat_commands â”‚      â”‚
â”‚   _commands.rs   â”‚     .rs         â”‚    .rs          â”‚      â”‚
â”‚                  â”‚                 â”‚                 â”‚      â”‚
â”‚  - get_status    â”‚  - quick_scan   â”‚  - get_details  â”‚      â”‚
â”‚  - update_defs   â”‚  - full_scan    â”‚  - quarantine   â”‚      â”‚
â”‚  - refresh       â”‚  - cancel       â”‚  - remove       â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SERVICES (LÃ³gica de NegÃ³cio)                   â”‚
â”‚                                                              â”‚
â”‚  DefenderStatus â”‚  ScanService    â”‚ ThreatManagement â”‚      â”‚
â”‚    Service      â”‚                 â”‚    Service       â”‚      â”‚
â”‚                 â”‚                 â”‚                  â”‚      â”‚
â”‚  - ValidaÃ§Ãµes   â”‚  - Check runningâ”‚  - Mapeamento   â”‚      â”‚
â”‚  - Regras       â”‚  - Contagem     â”‚  - Severidade   â”‚      â”‚
â”‚  - FormataÃ§Ã£o   â”‚  - HistÃ³rico    â”‚  - EstratÃ©gias  â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
        â”‚              â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             INFRA (ComunicaÃ§Ã£o Externa)                      â”‚
â”‚                                                              â”‚
â”‚               PowerShellExecutor                             â”‚
â”‚                                                              â”‚
â”‚  - run(command)          â†’ Executa comandos PS              â”‚
â”‚  - check_scan_running()  â†’ Verifica estado                  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           WINDOWS DEFENDER (PowerShell)                      â”‚
â”‚                                                              â”‚
â”‚  - Get-MpComputerStatus                                     â”‚
â”‚  - Start-MpScan                                             â”‚
â”‚  - Get-MpThreatDetection                                    â”‚
â”‚  - Remove-MpThreat                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MODELS (Dados - Compartilhados)                â”‚
â”‚                                                              â”‚
â”‚  DefenderStatus â”‚ ScanResult â”‚ ThreatDetail â”‚ CleanResult  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de Dados Detalhado

### Exemplo: Executar Quick Scan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚  onClick={() => runQuickScan()}
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ invoke('quick_scan')
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ commands/scan_commands.rs               â”‚
â”‚                                         â”‚
â”‚ #[tauri::command]                       â”‚
â”‚ pub async fn quick_scan()               â”‚
â”‚     -> Result<ScanResult, String>       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ ScanService::quick_scan().await
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ services/scan_service.rs                â”‚
â”‚                                         â”‚
â”‚ 1. Check if scan is running             â”‚
â”‚    â”œâ”€ PowerShellExecutor::check_scan..()â”‚
â”‚    â””â”€ return Err if running             â”‚
â”‚                                         â”‚
â”‚ 2. Start quick scan                     â”‚
â”‚    â”œâ”€ PowerShellExecutor::run(...)      â”‚
â”‚    â””â”€ "Start-MpScan -ScanType QuickScan"â”‚
â”‚                                         â”‚
â”‚ 3. Count threats                        â”‚
â”‚    â”œâ”€ PowerShellExecutor::run(...)      â”‚
â”‚    â””â”€ "Get-MpThreatDetection"           â”‚
â”‚                                         â”‚
â”‚ 4. Build ScanResult                     â”‚
â”‚    â””â”€ return ScanResult { ... }         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Result<ScanResult, String>
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ infra/powershell.rs                     â”‚
â”‚                                         â”‚
â”‚ PowerShellExecutor::run(command)        â”‚
â”‚                                         â”‚
â”‚ Command::new("powershell")              â”‚
â”‚   .arg("-Command")                      â”‚
â”‚   .arg(command)                         â”‚
â”‚   .output()                             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ PowerShell Output (String)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Windows Defender                        â”‚
â”‚                                         â”‚
â”‚ Executes PowerShell commands            â”‚
â”‚ Returns results                         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Success/Error
       â–²
       â”‚
       â”‚ Process results
       â”‚
       â”‚ services/scan_service.rs
       â”‚   - Parse threats count
       â”‚   - Calculate scan time
       â”‚   - Build ScanResult
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend receives:                      â”‚
â”‚ {                                       â”‚
â”‚   threats_found: 2,                     â”‚
â”‚   files_scanned: 50000,                 â”‚
â”‚   scan_time: "15.32s"                   â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ OrganizaÃ§Ã£o de Arquivos por Funcionalidade

### ğŸ›¡ï¸ Status do Defender

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ models/mod.rs                           â”‚
â”‚ pub struct DefenderStatus {             â”‚
â”‚     is_enabled: bool,                   â”‚
â”‚     last_scan: Option<String>           â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ usado por â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ services/defender_status_service.rs     â”‚
â”‚                                         â”‚
â”‚ impl DefenderStatusService {            â”‚
â”‚   get_status()                          â”‚
â”‚   update_definitions()                  â”‚
â”‚   refresh_detection()                   â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ usado por â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ commands/defender_status_commands.rs    â”‚
â”‚                                         â”‚
â”‚ #[tauri::command]                       â”‚
â”‚ get_defender_status()                   â”‚
â”‚ update_definitions()                    â”‚
â”‚ refresh_threat_detection()              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” VerificaÃ§Ãµes (Scans)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ models/mod.rs                           â”‚
â”‚ - ScanResult                            â”‚
â”‚ - ScanHistoryItem                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ services/scan_service.rs                â”‚
â”‚ - quick_scan()                          â”‚
â”‚ - full_scan()                           â”‚
â”‚ - cancel_scan()                         â”‚
â”‚ - get_history()                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ commands/scan_commands.rs               â”‚
â”‚ - quick_scan                            â”‚
â”‚ - full_scan                             â”‚
â”‚ - cancel_scan                           â”‚
â”‚ - get_scan_history                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš ï¸ Gerenciamento de AmeaÃ§as

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ models/mod.rs                           â”‚
â”‚ - ThreatDetail                          â”‚
â”‚ - ThreatSummary                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ services/threat_management_service.rs   â”‚
â”‚ - get_threat_details()                  â”‚
â”‚ - quarantine_threat()                   â”‚
â”‚ - remove_specific_threat()              â”‚
â”‚ - allow_threat()                        â”‚
â”‚ - restore_threat()                      â”‚
â”‚ - clean_quarantine()                    â”‚
â”‚ - remove_all_threats()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ commands/threat_commands.rs             â”‚
â”‚ - get_threat_details                    â”‚
â”‚ - quarantine_threat                     â”‚
â”‚ - remove_specific_threat                â”‚
â”‚ - allow_threat                          â”‚
â”‚ - restore_threat                        â”‚
â”‚ - clean_quarantine                      â”‚
â”‚ - remove_all_threats                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Responsabilidades das Camadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMMANDS                             â”‚
â”‚                                                         â”‚
â”‚ âœ“ Receber chamadas do frontend                         â”‚
â”‚ âœ“ Validar parÃ¢metros bÃ¡sicos                           â”‚
â”‚ âœ“ Delegar para services                                â”‚
â”‚ âœ“ Retornar resultados tipados                          â”‚
â”‚ âœ— NÃƒO contÃ©m lÃ³gica de negÃ³cio                         â”‚
â”‚ âœ— NÃƒO chama infraestrutura diretamente                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVICES                             â”‚
â”‚                                                         â”‚
â”‚ âœ“ Implementar regras de negÃ³cio                        â”‚
â”‚ âœ“ Coordenar mÃºltiplas operaÃ§Ãµes                        â”‚
â”‚ âœ“ Processar e transformar dados                        â”‚
â”‚ âœ“ Tratar erros de negÃ³cio                              â”‚
â”‚ âœ— NÃƒO conhece detalhes do Tauri                        â”‚
â”‚ âœ— NÃƒO executa comandos diretamente                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INFRA                               â”‚
â”‚                                                         â”‚
â”‚ âœ“ Executar comandos PowerShell                         â”‚
â”‚ âœ“ Gerenciar conexÃµes externas                          â”‚
â”‚ âœ“ Tratar erros de infraestrutura                       â”‚
â”‚ âœ“ Abstrair detalhes de implementaÃ§Ã£o                   â”‚
â”‚ âœ— NÃƒO contÃ©m lÃ³gica de negÃ³cio                         â”‚
â”‚ âœ— NÃƒO conhece models de domÃ­nio                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MODELS                               â”‚
â”‚                                                         â”‚
â”‚ âœ“ Definir estruturas de dados                          â”‚
â”‚ âœ“ Implementar serializaÃ§Ã£o                             â”‚
â”‚ âœ“ Ser compartilhado entre camadas                      â”‚
â”‚ âœ— NÃƒO contÃ©m lÃ³gica                                    â”‚
â”‚ âœ— NÃƒO tem dependÃªncias                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”€ PadrÃµes de ComunicaÃ§Ã£o

### 1. Frontend â†’ Backend

```
JavaScript                    Rust
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
invoke('comando', { param })  â†’  #[tauri::command]
                                  pub fn comando(param: Type)
                                  
Result<T>                     â†  Result<T, String>
```

### 2. Commands â†’ Services

```
commands/                     services/
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#[tauri::command]            impl Service {
pub fn comando()       â†’       pub fn metodo()
  Service::metodo()              // lÃ³gica
}                              }
```

### 3. Services â†’ Infra

```
services/                     infra/
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
impl Service {               impl PowerShellExecutor {
  let cmd = "...";     â†’       pub fn run(cmd: &str)
  PowerShellExecutor             // executa
    ::run(cmd)                   Command::new(...)
}                              }
```

## ğŸ“Š DependÃªncias entre MÃ³dulos

```
        main.rs
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚
commands        models
    â”‚             â–²
    â”‚             â”‚
    â–¼             â”‚
 services â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
  infra
```

**Regra**: DependÃªncias fluem apenas para baixo e para models

## ğŸ¨ Exemplo Completo: Remover AmeaÃ§a

```
1. USER CLICK
   â”‚
   â–¼
2. Frontend: removeThreat(threatId)
   â”‚
   â”‚ invoke('remove_specific_threat', { threatId })
   â–¼
3. commands/threat_commands.rs
   â”‚
   â”‚ #[tauri::command]
   â”‚ remove_specific_threat(threat_id: u64)
   â–¼
4. services/threat_management_service.rs
   â”‚
   â”‚ ThreatManagementService::remove_specific_threat()
   â”‚
   â”œâ”€ Tenta: Remove-MpThreat
   â”‚  â”‚
   â”‚  â–¼ PowerShellExecutor::run("Remove-MpThreat ...")
   â”‚  â”‚
   â”‚  â”œâ”€ âœ… Sucesso â†’ return "Removido"
   â”‚  â”‚
   â”‚  â””â”€ âŒ Falha â†’ Tenta Plano B
   â”‚     â”‚
   â”‚     â”œâ”€ takeown
   â”‚     â”œâ”€ icacls
   â”‚     â””â”€ Remove-Item
   â”‚
   â–¼
5. Result volta para o frontend
   â”‚
   â”‚ toast.success("AmeaÃ§a removida")
   â”‚ refreshThreats()
   â–¼
6. UI atualizada
```

## ğŸ§© Como Cada Camada Se Comunica

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMUNICAÃ‡ÃƒO                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Frontend  â”€â”€invoke()â”€â”€â†’  Commands                  â”‚
â”‚                                                      â”‚
â”‚  Commands  â”€â”€chamaâ”€â”€â†’  Services                     â”‚
â”‚                                                      â”‚
â”‚  Services  â”€â”€usaâ”€â”€â†’  Models (leitura/escrita)      â”‚
â”‚           â”€â”€chamaâ”€â”€â†’  Infra                         â”‚
â”‚                                                      â”‚
â”‚  Infra     â”€â”€executaâ”€â”€â†’  Sistema Externo            â”‚
â”‚                                                      â”‚
â”‚  Resultado  â†â”€â”€â†â”€â”€â†â”€â”€â†â”€â”€  volta pelo mesmo caminho  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Este guia visual ajuda a entender rapidamente como o DefenderPro estÃ¡ organizado! ğŸš€**
